<oj-sp-smart-search-page page-title="Application" display-mode="light" primary-action.display="on"
   primary-action.label="Reset"
   secondary-actions='[{"label":"Search","id":"search","icon":"oj-ux-ico-content-item-search"}]'
   on-sp-secondary-action="[[$listeners.smartSearchPageTemplateSpSecondaryAction]]"
   on-sp-primary-action="[[$listeners.smartSearchPageTemplateSpPrimaryAction]]">
   <!-- <div class="oj-panel oj-panel-shadow-md oj-selected"> -->
   <!-- Start of Drawer Popup -->
   <oj-drawer-popup style="width:35%;" opened="{{ $variables.drawerPopup }}" edge="end" modality="modeless"
      auto-dismiss="none">
      <!-- <oj-collapsible  id="c4">-->
      <oj-toolbar chroming="solid" style="background-color:#013766;">
         <oj-button display="icons" chroming="borderless" on-oj-action="[[$listeners.buttonAction]]">
            <span class="oj-ux-ico-chevron-left" slot="startIcon"></span>
         </oj-button>
         <h1 id="h4" style="font-size: larger; color:white; font-weight: bold; margin-left:1% ">Search Application</h1>
      </oj-toolbar>
      <br>
      <div class="oj-helper-justify-content-flex-end">
         <oj-form-layout columns="1" label-edge="start" direction="column" max-columns="2"
            class="oj-forme-control oj-sm-align-self-center">
            <oj-select-single label-hint="Business Unit" style="width: 21rem;"
               placeholder="[[$application.translations.appBundle.select_single_placeholder]]"
               data="[[ $variables.getBusinessUnitListSDP ]]" item-text="bu_name"
               value="{{ $variables.newSearchVar.p_bu_id }}">
               <template slot="collectionTemplate" data-oj-as="collection">
                  <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
                     columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                     {"headerText":"BusinessUnit","field":"bu_name"}
                     ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                     selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid"
                     horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
                  </oj-table>
               </template>
            </oj-select-single>
            <oj-select-single label-hint="Supplier Name" style="width: 21rem;" data="[[$variables.getVendorsListSDP]]"
               item-text="vendor_name" placeholder="Supplier Name" value="{{ $variables.newSearchVar.p_vendor_id }}">
               <template slot="collectionTemplate" data-oj-as="collection">
                  <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
                     columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                     {"headerText":"Supplier Name","field":"vendor_name"}
                     ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                     selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid"
                     horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
                  </oj-table>
               </template>
            </oj-select-single>
            <!-- <oj-select-single label-hint="Contract Number" style="width: 21rem;"></oj-select-single> -->
            <oj-select-single label-hint=" Contract Number" style="width: 21rem;" placeholder="Contract Number"
               data="[[ $variables.getContractNumListSDP ]]" value="{{ $variables.newSearchVar.p_contract_num }}"
               item-text="contract_num">
               <template slot="collectionTemplate" data-oj-as="collection">
                  <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
                     columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                     {"headerText":"Contract Number","field":"contract_num"}
                     ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                     selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid"
                     horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
                  </oj-table>
               </template>
            </oj-select-single>
            <oj-select-single label-hint="Application Number" style="width: 21rem;"
               data="[[ $variables.getApplicationByAppNumberListSDP ]]" item-text="application_num"
               placeholder="Application Number" value="{{ $variables.newSearchVar.p_application_num }}">
               <template slot="collectionTemplate" data-oj-as="collection">
                  <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
                     columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                     {"headerText":"Application Number","field":"application_num"}
                     ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                     selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid"
                     horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
                  </oj-table>
               </template>
            </oj-select-single>
            <oj-select-single label-hint="Application Status " style="width: 21rem;"
               data="[[$variables.getookupdetailListSDP]]" item-text="lookup_value_name_disp"
               placeholder="Application Status" value="{{ $variables.newSearchVar.p_application_status }}">
               <template slot="collectionTemplate" data-oj-as="collection">
                  <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
                     columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                     {"headerText":"Application Status","field":"lookup_value_name_disp"}
                     ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                     selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid"
                     horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
                  </oj-table>
               </template>
            </oj-select-single>
            <!-- <oj-select-single label-hint="Status " style="width: 21rem;" item-text="lookup_value_name_disp"
               value="{{ $variables.newSearchVar.p_application_status }}"
               data="[[$variables.getApplicationModuleLovApprovalstatusListSDP]]">
               <template slot="collectionTemplate" data-oj-as="collection">
               <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
                 columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                                   {"headerText":"Application Status","field":"lookup_value_name_disp"}
                                  
                               ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                 selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid"
                 horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
               </oj-table>
               </template>
               </oj-select-single>   -->
            <oj-select-single label-hint="Approval Status" style="width: 21rem;"
               data="[[$variables.getookupdetailListSDP2]]" item-text="lookup_value_name_disp" placeholder="Approval Status"
               value="{{ $variables.newSearchVar.p_approval_status }}">
               <template slot="collectionTemplate" data-oj-as="collection">
                  <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
                     columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                     {"headerText":"Approval Status","field":"lookup_value_name_disp"}
                     ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                     selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid"
                     horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
                  </oj-table>
               </template>
            </oj-select-single>
            <!-- notification status lov -->
            <!-- <oj-select-single label-hint="Approval Status" style="width: 21rem;"
               data="[[$variables.getApplicationModuleLovApprovalstatusListSDP]]" item-text="lookup_value_name_disp" placeholder="Approval Status"
                  value="{{ $variables.newSearchVar.p_approval_status }}">
                  <template slot="collectionTemplate" data-oj-as="collection">
                    <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
                      columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                                        {"headerText":"Status","field":"lookup_value_name_disp"}
                                       
                                    ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                      selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid"
                      horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
                    </oj-table>
                  </template>
                </oj-select-single>  -->
            <!-- <oj-select-single label-hint="Payment Type" style="width: 21rem;"></oj-select-single> -->
            <oj-select-single label-hint="Payment Type" style="width: 21rem;" placeholder="Payment Type"
               item-text="lookup_value_name_disp" " 
               data=" [[ $variables.getPaymentTypeSDP ]]" value="{{ $variables.newSearchVar.p_payment_type }}">
               <template slot="collectionTemplate" data-oj-as="collection">
                  <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
                     columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                     {"headerText":"Payment Type","field":"lookup_value_name_disp"}
                     ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                     selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid"
                     horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
                  </oj-table>
               </template>
            </oj-select-single>
            <oj-input-date label-hint="Application From Date" style="width: 21rem;"
               converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}' placeholder="Application From Date"
               value="{{ $variables.newSearchVar.p_from_app_date }}" max="[[ $variables.newSearchVar.p_to_app_date ]]"></oj-input-date>
            <oj-input-date label-hint="Application to Date" style="width: 21rem;"
               converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}' placeholder="Application to Date"
               value="{{ $variables.newSearchVar.p_to_app_date }}" min="[[ $variables.newSearchVar.p_from_app_date ]]">
            </oj-input-date>
            <oj-input-date label-hint="Payment Due From Date" style="width: 21rem;"
               converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}' placeholder="Payment Due From Date"
               value="{{ $variables.newSearchVar.p_from_payment_due_date }}"
               max="[[ $variables.newSearchVar.p_to_payment_due_date ]]"></oj-input-date>
            <oj-input-date label-hint="Payment Due to Date" style="width: 21rem;"
               converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}' placeholder="Payment Due to Date"
               value="{{ $variables.newSearchVar.p_to_payment_due_date }}"
               min="[[ $variables.newSearchVar.p_from_payment_due_date ]]"></oj-input-date>
         </oj-form-layout>
      </div>
      <div style="display:flex; justify-content:flex-end;">
         <oj-button style="searchBtn margin-left:0.5%;margin-right:0.5%;"
            label="[[$application.translations.appBundle.button_label]]" on-oj-action="[[$listeners.buttonAction2]]">
         </oj-button>
         <oj-button style="resetBtn margin-left:0.5%;margin-right:0.5%;"
            label="[[$application.translations.appBundle.button_label_caa9]]" on-oj-action="[[$listeners.buttonAction3]]">
         </oj-button>
      </div>
      <!-- </oj-collapsible> -->
      <!-- </div> -->
   </oj-drawer-popup>
   <!-- End of Drawer Popup -->
   <!-- Start of Application Transaction Table -->
   <div id="sampleDemo" style="" class="demo-padding demo-container">
      <div id="componentDemoContent" style="width: 1px; min-width: 100%;">
         <div id="mainContent">
            <div class="oj-flex oj-sm-justify-content-flex-end">
               <!-- <oj-sample-export-data></oj-sample-export-data> -->
               <oj-button chroming="half" label="Create Application" on-oj-action="[[$listeners.buttonAction4]]">
                  <img slot="startIcon" :src="[[ $flow.path + 'resources/images/MicrosoftTeams-image_(1).png' ]]">
               </oj-button>
               <oj-sample-export-data style="margin-left:3px;" class="oj-flex-item oj-sm-flex-initial" max-rows="10000"
                  chroming="half" file-name="Application Information">
                  <span>
                     <oj-bind-text value="Export"></oj-bind-text>
                  </span>
                  <img slot="startIcon" width="15" height="15" :src="[[ $flow.path + 'resources/images/excel_img_1.png' ]]">
               </oj-sample-export-data>
               <oj-table style="width:80%" scroll-policy="loadMoreOnScroll"
                  class="oj-sm-width-full oj-bg-body oj-search-table" selection-mode.row="single" id="searchSSTable"
                  display="grid" selection-mode.column="single" data="[[ $application.variables.searchData ]]"
                  columns="{{ $variables.columnsList }}">
                  <template slot="edit">
                     <a target="_blank" on-click="[[$listeners.hyperlinkClick]]">
                        <oj-bind-text value="[[$current.data]]"></oj-bind-text>
                     </a>
                  </template>
                  <!-- contractDate -->
                  <template slot="contractDate">
                     <oj-input-date value="[[$current.data]]" readonly="true"
                        converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'></oj-input-date>
                  </template>
                  <template slot="applDate">
                     <oj-input-date value="[[$current.data]]" readonly="true"
                        converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'></oj-input-date>
                  </template>
                  <template slot="approvalstatus">
                     <oj-bind-if test='[[ $current.row.approval_status_code === "Approved"]]'> 
                        <span class="oj-badge oj-badge-success oj-badge-sm" style="margin-left: 40px;">Approved</span>
                     </oj-bind-if>
                     <oj-bind-if test='[[ $current.row.approval_status_code === "Draft" ]]'>
                        <span class="oj-badge oj-badge-sm oj-badge-info" style="margin-left: 40px;" >Draft</span>
                     </oj-bind-if>
                     <oj-bind-if test='[[ $current.row.approval_status_code === "Withdraw" ]]'>
                        <span class="oj-badge oj-badge-sm oj-badge-info" style="margin-left: 40px;" >Withdraw</span>
                     </oj-bind-if>
                     <oj-bind-if test='[[ $current.data === "Pending" ]]'>
                        <span class="oj-badge oj-badge-sm oj-badge-waring" style="margin-left: 40px;" >Pending</span>
                     </oj-bind-if>
                     <oj-bind-if test='[[ $current.data === "Rejected" ]]'>
                        <span class="oj-badge oj-badge-sm oj-badge-danger" style="margin-left: 40px;" >Rejected</span>
                     </oj-bind-if>
                  </template>
                  <!-- Contract Status Template -->
                  <template slot="activeFlagTemplate">
                     <oj-bind-if test='[[ $current.data==="N" ]]'>
                        <img :src="[[ $application.path + 'resources/images/Cancel.png' ]]" style="margin-left:40%;">
                     </oj-bind-if>
                     <oj-bind-if test='[[ $current.data!=="N" ]]'>
                        <img :src="[[ $flow.path + 'resources/images/isActive_Y.png' ]]" style="margin-left:35%;">
                     </oj-bind-if>
                  </template>
                  <template slot="ContractAmount">
                     <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                        converter='{"options":{"minimumFractionDigits":2},"type":"number"}'></oj-input-number>
                  </template>
                  <template slot="TaxAmount">
                     <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                        converter='{"options":{"minimumFractionDigits":2},"type":"number"}'></oj-input-number>
                  </template>
                  <template slot="NetContractAmount">
                     <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                        converter='{"options":{"minimumFractionDigits":2},"type":"number"}'></oj-input-number>
                  </template>
                  <template slot="delete">
                     <oj-bind-if
                        test="[[ $current.row.approval_status_code == 'Draft' || $current.row.approval_status_code ==  'Rejected' || $current.row.approval_status_code ==  'Withdraw' ]]">
                        <oj-button style="alt= center;" display="icons" chroming="borderless"
                           on-oj-action="[[$listeners.buttonAction9]]"> <img :src="[[ $flow.path + 'resources/images/deleteBtn.png' ]]" width="15" height="15">
                        </oj-button>
                     </oj-bind-if>
                     <oj-bind-if
                        test="[[ $current.row.approval_status_code == 'Pending' || $current.row.approval_status_code ==  'Submitted' || $current.row.approval_status_code ==  'Approved' ]]">
                        <oj-button style="alt= center;" display="icons" chroming="borderless">
                           <img  width="15" height="15" :src="[[ $flow.path + 'resources/images/disable_delete.png' ]]">
                           <oj-bind-text value="[[$current.data]]"></oj-bind-text>
                        </oj-button>
                     </oj-bind-if>
                  </template>
                  <oj-paging-control id="paging" class="oj-sm-width-full" style="margin-left:38%;" slot="bottom"
                    data="[[ $application.variables.searchData ]]" page-size="10"></oj-paging-control>
               </oj-table>
            </div>
         </div>
      </div>
   </div>
   <!-- End of Application Transaction Table -->
   <!-- Start of Application Create Dialog -->
   <oj-dialog style="width: 550px; height: 500px;" dialog-title="Application" id="Application" modality="modeless">
      <div slot="body">
         <!--   <div class="oj-flex oj-panel"><div class="oj-flex-item oj-sm-flex-initial">   -->
         <oj-validation-group id="applicationForm">
            <oj-form-layout label-edge="start" class="oj-forme-control" label-width="33%" columns="1">
               <!--Contract No  -->
               <oj-select-single label-hint="* Contract Number" style="width: 22rem;margin-bottom:6px;"
                  placeholder="Contract Number" data="[[ $variables.getContractNumListSDP ]]"
                  value="{{ $variables.postHeaderTrans.contractNum }}" on-value-item-changed="[[$listeners.selectValueItem]]"
                  required="true" item-text="contract_num" user-assistance-density="compact">
                  <template slot="collectionTemplate" data-oj-as="collection">
                     <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
                        vertical-grid-visible="disabled" selection-mode='{"row": "single"}'
                        columns-default='{"resizable": "disabled","sortable": "disabled"}' columns=' [ {"headerText":"Contract Number","field":"contract_num"},
                        {"headerText":"Supplier Name","field":"vendor_name"},
                        {"headerText":"Supplier Site","field":"vendor_site_code"},
                        {"headerText":"Business Unit","field":"bu_name"}
                        ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                        selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}"></oj-table>
                  </template>
               </oj-select-single>
               <!--payment Type-->
               <oj-bind-if test='true'>
                  <oj-select-single label-hint="* Payment Type" style="width: 22rem;margin-bottom:6px;"
                     placeholder="Payment Type" item-text="lookup_value_name_disp"
                     value="{{ $variables.postCreateApplHdr.P_PAYMENT_TYPE_ID }}" data="[[ $variables.getPaymentTypeSDP ]]"
                     required="true" user-assistance-density="compact">
                     <template slot="collectionTemplate" data-oj-as="collection">
                        <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
                           vertical-grid-visible="disabled" selection-mode='{"row": "single"}'
                           columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results"
                           columns=' [{"headerText":"Payment Type","field":"lookup_value_name_disp"}]'
                           on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                           selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}"></oj-table>
                     </template>
                  </oj-select-single>
               </oj-bind-if>
               <oj-input-text label-hint="Business Unit" value="{{ $variables.postHeaderTrans.businessUnit }}"
                  disabled="true"></oj-input-text>
               <oj-input-text label-hint="Supplier Name" value="{{ $variables.postHeaderTrans.supplierName }}"
                  disabled="true"></oj-input-text>
               <oj-input-text label-hint="Supplier Site" value="{{ $variables.postHeaderTrans.supplierSite }}"
                  disabled="true"></oj-input-text>
            </oj-form-layout>
         </oj-validation-group>
      </div>
      <!--   </div></div>  -->
      <div slot="footer">
         <oj-validation-group style="display:flex; justify-content:flex-end;">
            <oj-button chroming="solid" label="Save And Create" on-oj-action="[[$listeners.buttonAction5]]"></oj-button>
            <oj-button chroming="solid" label="Close" on-oj-action="[[$listeners.buttonAction8]]"></oj-button>
         </oj-validation-group>
      </div>
   </oj-dialog>
   <!-- End of Application Create Dialog -->
   <!-- Start of Application Information Dialog -->
   <oj-dialog style="display:none; width: 400px;height: 200px;" dialog-title="Note" id="Information">
      <div slot="body">
         <h6 style="font-size:smaller; font-weight: bold;">Are you sure want to save and continue?</h6>
         <!-- <oj-button label="Are you sure want to save and continue?" chroming="borderless" disabled="true"></oj-button> -->
      </div>
      <div slot="footer">
         <oj-button chroming="solid" on-oj-action="[[$listeners.buttonAction6]]">OK</oj-button>
         <oj-button chroming="solid" on-oj-action="[[$listeners.buttonAction7]]">Cancel</oj-button>
      </div>
   </oj-dialog>
   <!-- End of Application Information Dialog -->
   <!-- Start of Delete Popup  Dialog -->
   <oj-dialog dialog-title="Delete" id="DeletePopup">
      <div slot="body">
         <h6 style="font-size:medium; font-weight: bold;">Are you sure want to delete?</h6>
      </div>
      <div slot="footer">
         <oj-button on-oj-action="[[$listeners.buttonAction11]]">Yes</oj-button>
         <oj-button on-oj-action="[[$listeners.buttonAction10]]">No</oj-button>
      </div>
   </oj-dialog>
   <!-- End of Delete Popup  Dialog -->  
</oj-sp-smart-search-page>