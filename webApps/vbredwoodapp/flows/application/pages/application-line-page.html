<div>
  <oj-sp-simple-create-edit id="oj_ssce1" page-title="Application " page-subtitle=" "
    avatar="{{$page.variables.avatar}}"
    primary-action.disabled="{{ $variables.displayOption.save }}"
    display-options.save="{{$page.variables.saveOption!=='off'?$page.variables.dirtyDataFlag?'on':'disabled':'off'}}"
    display-options.go-to-parent="{{$page.variables.goToParentOption }}"
    contextual-info-sticky="{{ $page.variables.contextualInfoSticky }}"
    display-options.contextual-info-label="{{$page.variables.contextualInfoLabelVisible}}"
    display-mode="[[$page.variables.displayMode]]" on-sp-cancel="[[$listeners.ojSpCancel]]"
    on-sp-save="[[$listeners.ojSpSave]]" on-sp-go-to-parent="[[$listeners.ojSpGoToParent]]"
    on-sp-primary-action="[[$listeners.ojSpSubmit]]" primary-action.label="Save" badge.status="info"
    badge.text="[[ 'App-'+$variables.getApplicationLinByHdrIdVar.header_id ]]"
    secondary-actions='[[ [{"label":"Save and Close","id":"saveclose","display":$variables.displayOption.saveClose}] ]]'
    on-sp-secondary-action="[[$listeners.ojSsce1SpSecondaryAction2]]" 
  >
 <div slot="main">
<div class="oj-panel oj-panel-shadow-md oj-selected">
          <div class="demo-tab-content">
            <div id="mainContent">
              <h1 id="h4" style=" color: #013766; font-size: larger; font-weight: bold;">Application Line Details</h1>
              <div class="oj-flex-bar-end">
                <!-- <oj-button label="detach" display="icons" chroming="half" class="oj-flex-bar-end"
   on-oj-action="[[$listeners.buttonAction2]]" ><img slot="startIcon" :src="[[ $flow.path + 'resources/images/979072-200.png' ]]" width="15" height="15"></oj-button>  -->
              </div>
              <oj-table scroll-policy="loadMoreOnScroll" class="oj-sm-width-full oj-bg-body oj-search-table"
                selection-mode.row="none" id="searchTable1" display="grid" horizontal-grid-visible="enabled"
                vertical-grid-visible="enabled" selection-mode.column="none" style="height:300px;"
                scroll-policy-options.fetch-size="50" scroll-policy-options.max-count="1000"
                data="[[ $variables.applLineADP ]]"
                columns='[{"headerText":"Item Number","field":"item_num","template":"","width":172,"resizable":"enabled","frozenEdge":"start"},{"headerText":"Item Description","field":"item_description","width":242,"template":"","resizable":"enabled","frozenEdge":"start"},{"headerText":"Project Number ","field":"project_num","template":"","width":189,"resizable":"enabled","frozenEdge":"start"},{"headerText":" Task Number","field":"task_num","template":"","width":170,"resizable":"enabled"},{"headerText":" Expenditure Type","field":"expenditure_type","template":"","width":190,"resizable":"enabled"},{"headerText":"Quantity","field":"quantity","template":"quantity","width":105,"resizable":"enabled"},{"headerText":"Unit Price","field":"unit_price","template":"unitprice","width":125,"resizable":"enabled"},{"headerText":"UOM","field":"uom_code","template":"","width":120,"resizable":"enabled"},{"headerText":"Tax Code","field":"tax_code","template":"","width":161,"resizable":"enabled"},{"headerText":"Line Amount","field":"cont_line_amount","template":"lineamount","width":169,"resizable":"enabled"},{"headerText":"Tax Rate","field":"cont_tax_rate","template":"taxRate","width":161,"resizable":"enabled"},{"headerText":"Tax Amount","field":"cont_tax_amount","template":"TaxAmount","width":154,"resizable":"enabled"},{"headerText":"Total Line Amount","field":"cont_net_line_amount","template":"TaxAmount","width":193,"resizable":"enabled"},{"headerText":"Evaluation Mode","field":"calc_mode","template":"paymentType","width":160,"resizable":"enabled"},{"headerText":"Cumulative Percentage","field":"cum_percentage","template":"cumPerc","width":160,"resizable":"enabled"},{"headerText":"Cumulative Quantity","field":"cum_quantity","template":"cumQty","width":170,"resizable":"enabled"},{"headerText":"Cumulative Amount","field":"cum_amount","template":"cumAmount","width":150,"resizable":"enabled"},{"headerText":"Previous Percentage","field":"pre_percentage","template":"prevPerc","width":150,"resizable":"enabled"},{"headerText":"Previous Quantity","field":"pre_quantity","template":"prevQty","width":155,"resizable":"enabled"},{"headerText":"Previous Amount","field":"pre_amount","template":"prevAmount","width":150,"resizable":"enabled"},{"headerText":"Current Percentage","field":"cur_percentage","template":"currPerc","width":150,"resizable":"enabled"},{"headerText":"Current Quantity","field":"cur_quantity","template":"currQty","width":150,"resizable":"enabled"},{"headerText":"Current Amount","field":"cur_amount","template":"currAmount","width":150,"resizable":"enabled"}]'>
                </template>
                <template slot="taxRate">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                    converter='{"type":"number"}'></oj-input-number>
                </template>
                <template slot="TaxAmount">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true" converter='{"options":{"minimumFractionDigits":3},"type":"number"}'></oj-input-number>
                </template>
                <template slot="quantity">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                    converter='{"type":"number"}'></oj-input-number>
                </template>
                <template slot="prevPerc">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                    converter='{"type":"number"}'></oj-input-number>
                </template>
                <template slot="prevQty">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                    converter='{"type":"number"}'></oj-input-number>
                </template>
                <template slot="prevAmount">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true" converter='{"options":{"minimumFractionDigits":3},"type":"number"}'></oj-input-number>
                </template>
                <template slot="currPerc">
                  <oj-input-number :id="[['cur_percentage'+$current.index]]" style="text-align: right;"
                    value="[[$current.data]]" readonly="true" converter='{"type":"number"}'></oj-input-number>
                </template>
                <template slot="currQty">
                  <oj-input-number :id="[['cur_quantity'+$current.index]]" style="text-align: right;"
                    value="[[$current.data]]" readonly="true" converter='{"type":"number"}'></oj-input-number>
                </template>
                <template slot="currAmount">
                  <oj-input-number :id="[['cur_amount'+$current.index]]" style="text-align: right;" value="[[$current.data]]" readonly="true" converter='{"options":{"minimumFractionDigits":3},"type":"number"}'></oj-input-number>
                </template>
                <template slot="paymentType">
                  <oj-combobox-one :id="[['calc_mode'+$current.index]]" placeholder="Select Payment Type"
                    required="true" value="{{ $current.row.calc_mode }}"
                    on-value-changed="[[$listeners.paymentTypeValue]]"
                    disabled="[[ $variables.getApplicationheaderByIdVar.approval_status_code == 'Pending' || $variables.getApplicationheaderByIdVar.approval_status_code == 'Approved' || $variables.getApplicationheaderByIdVar.payment_type_code == 'FINAL' ]]">
                    <oj-option value="P">Percentage</oj-option>
                    <oj-option value="Q">Quantity</oj-option>
                  </oj-combobox-one>
                </template>
                <template slot="cumPerc">
                  <oj-input-number :id="[['cum_percentage'+$current.index]]" virtual-keyboard="number"
                    style="text-align: right;" value="[[$current.row.cum_percentage]]"
                    converter='{"type":"number"}'
                   
                    readonly="[[ $current.row.calc_mode == 'Q' || $variables.getApplicationheaderByIdVar.approval_status_code == 'Pending'  || $variables.getApplicationheaderByIdVar.approval_status_code == 'Approved' || $variables.getApplicationheaderByIdVar.payment_type_code == 'FINAL' ]]"
                   
                    on-value-changed="[[$listeners.cumPercentageValue]]" max="100"
                    min="[[ $current.row.pre_percentage ]]" ></oj-input-number>
                </template>
                <template slot="cumQty">
                  <oj-input-number :id="[['cum_quantity'+$current.index]]" virtual-keyboard="number"
                    style="text-align: right;" value="[[$current.row.cum_quantity]]"
                    converter='{"type":"number"}'
                    readonly="[[ $current.row.calc_mode == 'P' || $variables.getApplicationheaderByIdVar.approval_status_code == 'Pending'  || $variables.getApplicationheaderByIdVar.approval_status_code == 'Approved' || $variables.getApplicationheaderByIdVar.payment_type_code == 'FINAL']]"
                    on-value-changed="[[$listeners.cumQuantityValue]]" max="[[ $current.row.quantity ]]"
                    min="[[ $current.row.pre_quantity ]]" ></oj-input-number>
                </template>
               
               
                <template slot="cumAmount">
                  <oj-input-number :id="[['cum_amount'+$current.index]]" virtual-keyboard="number" value="[[ $current.row.cum_amount ]]" style="text-align: right;" converter='{"options":{"minimumFractionDigits":3},"type":"number"}' readonly="true"></oj-input-number>
                </template>
                
<!-- 
                <template slot="ret_percentage">
                  <oj-input-number :id="[['cur_ret_percentage'+$current.index]]" virtual-keyboard="number" value="[[ $current.row.cur_ret_percentage ]]" style="text-align: right;" converter='{"options":{"minimumFractionDigits":3},"type":"number"}' readonly="true"></oj-input-number>
                </template>

                <template slot="ret_amount">
                  <oj-input-number :id="[['cur_ret_amount'+$current.index]]" virtual-keyboard="number" value="[[ $current.row.cur_ret_amount ]]" style="text-align: right;" converter='{"options":{"minimumFractionDigits":3},"type":"number"}' readonly="true"></oj-input-number>
                </template> -->


                <!-- ============ -->
                <template slot="lineamount">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true" converter='{"options":{"minimumFractionDigits":3},"type":"number"}'></oj-input-number>
                </template>
                <template slot="recretAmount">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true" converter='{"options":{"minimumFractionDigits":3},"type":"number"}'></oj-input-number>
                </template>
                <template slot="recadvAmount">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true" converter='{"options":{"minimumFractionDigits":3},"type":"number"}'></oj-input-number>
                </template>
                <template slot="recmatAmount">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true" converter='{"options":{"minimumFractionDigits":3},"type":"number"}'></oj-input-number>
                </template>
                <template slot="netAmount">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true" converter='{"options":{"minimumFractionDigits":3},"type":"number"}'></oj-input-number>
                </template>
                <template slot="unitprice">
                  <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true" converter='{"options":{"minimumFractionDigits":3},"type":"number"}'></oj-input-number>
                </template>
              </oj-table>
            </div>
          </div>
        </div>
 </div>
    <!-- <oj-dynamic-form slot="main" valid="{{$page.variables.formState}}"
      on-transient-value-changed="[[$listeners.ojdynamicFormTransientValueChangeChain]]"></oj-dynamic-form> -->
  </oj-sp-simple-create-edit>
  <!-- <oj-sp-message-unsaved-changes id="dirtyDataWarningDialog"
    on-oj-sp-discard-changes="[[ $listeners.confirmYesOjAction ]]" on-oj-sp-cancel="[[ $listeners.confirmNoOjAction ]]"></oj-sp-message-unsaved-changes> -->
</div>
