<oj-sp-smart-search-page page-title="Retention Release" display-mode="light" primary-action.display="on"
  primary-action.label="Reset"
  secondary-actions='[{"label":"Search","id":"search","icon":"oj-ux-ico-content-item-search"}]'
  on-sp-secondary-action="[[$listeners.smartSearchPageTemplateSpSecondaryAction]]"
  on-sp-primary-action="[[$listeners.smartSearchPageTemplateSpPrimaryAction]]"
 >

<!-- <div class="oj-panel oj-panel-shadow-md oj-selected"> -->
<oj-drawer-popup style="width:35%;" opened="{{ $variables.drawerPopup }}" edge="end" modality="modeless"
    auto-dismiss="none">
    <!-- <oj-collapsible  id="c4">-->
    <oj-toolbar chroming="solid" style="background-color:#013766;">

      <oj-button display="icons" chroming="borderless" on-oj-action="[[$listeners.buttonAction6]]">
        <span class="oj-ux-ico-chevron-left" slot="startIcon"></span>
      </oj-button>
      <h1 id="h4" style="font-size: larger; font-weight: bold; color:white; margin-left:1% ">Search Retention</h1>

    </oj-toolbar>
    <br>



  <div class="oj-helper-justify-content-flex-end">
<oj-form-layout columns="1" label-edge="start" direction="column" max-columns="2" class="oj-forme-control oj-sm-align-self-center">
 
 <oj-select-single label-hint="Business Unit" style="width: 21rem;"  data="[[ $variables.getBusinessunitLov ]]"
 item-text="bu_name" value="{{ $variables.newSearchObj.p_bu_id }}" placeholder="Business Unit" 
	>  <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
              columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results"
              columns=' [
                                {"headerText":"Business Unit","field":"bu_name"}
                               
                            ]' on-oj-row-action="[[collection.handleRowAction]]"
              data="[[collection.data]]" selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}"
              display="grid" horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
            </oj-table>
          </template></oj-select-single>



 <oj-select-single label-hint="Supplier Name" style="width: 21rem;" item-text="vendor_name"
   data="[[$variables.getVendorsListSDP]]" value="{{ $variables.newSearchObj.p_vendor_id }}"
   placeholder="Supplier Name" >
     <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
              columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results"
              columns=' [
                                {"headerText":"Supplier Name","field":"vendor_name"}
                               
                            ]' on-oj-row-action="[[collection.handleRowAction]]"
              data="[[collection.data]]" selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}"
              display="grid" horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
            </oj-table>
          </template></oj-select-single>
 <!-- <oj-select-single label-hint="Contract Number" style="width: 21rem;"></oj-select-single> -->
 
 <oj-select-single label-hint=" Contract Number" style="width: 21rem;" item-text="contract_num"
   data="[[$variables.getCertificationModuleLovContractnumberListSDP]]"
   value="{{ $variables.newSearchObj.p_contract_num }}" placeholder=" Contract Number" 
      >
        <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
              columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results"
              columns=' [
                                {"headerText":"Contract Number","field":"contract_num"}
                               
                            ]' on-oj-row-action="[[collection.handleRowAction]]"
              data="[[collection.data]]" selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}"
              display="grid" horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
            </oj-table>
          </template></oj-select-single>
	  
	  
 <oj-select-single label-hint="Retetention Release Number" style="width: 21rem;" item-text="ret_rel_num"
   data="[[$variables.getSearchRetentionnumberListSDP2]]" value="{{ $variables.newSearchObj.p_ret_rel_num }}"
   placeholder="Retetention Release Number">
     <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
              columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results"
              columns=' [
                                {"headerText":"Retetention Release Number","field":"ret_rel_num"}
                               
                            ]' on-oj-row-action="[[collection.handleRowAction]]"
              data="[[collection.data]]" selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}"
              display="grid" horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
            </oj-table>
          </template>
   </oj-select-single>
   
     <!-- <oj-select-single label-hint="Application Status " style="width: 21rem;" placeholder="Application Status"
       ></oj-select-single> -->
    
	<oj-select-single label-hint="Approval Status" style="width: 21rem;" item-text="lookup_value_name_disp"
   data="[[$variables.getookupdetailListSDP]]" value="{{ $variables.newSearchObj.p_approval_status_disp }}"
   placeholder="Approval Status"
        >
          <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
              columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results"
              columns=' [
                                {"headerText":"Approval Status","field":"lookup_value_name_disp"}
                               
                            ]' on-oj-row-action="[[collection.handleRowAction]]"
              data="[[collection.data]]" selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}"
              display="grid" horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
            </oj-table>
          </template></oj-select-single>
      <!-- <oj-select-single label-hint="Payment Type" style="width: 21rem;"></oj-select-single> -->

<!-- <oj-select-single label-hint="Retention Release Type" style="width: 21rem;" placeholder="Retention Release Type"  
      item-text="lookup_value_name_disp"  " 
     >
     
     
        <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
                  vertical-grid-visible="disabled" selection-mode='{"row": "single"}' 
                  columns-default='{"resizable": "disabled","sortable": "disabled"}' 
                  class="oj-select-results" 
                  columns=' [{"headerText":"Payment Type","field":"lookup_value_name_disp"}]' 
                on-oj-row-action="[[collection.handleRowAction]]"
                data="[[collection.data]]" selected.row="[[collection.selected]]"
                current-row="{{collection.currentRow}}">
            </oj-table>
          </template>
          </oj-select-single> -->
          <!-- <oj-input-text label-hint="Retention Release Type" style="width: 21rem;" placeholder="Retention Release Type"
            value="{{ $variables.newSearchObj.p_ret_rel_type }}"></oj-input-text> -->

 <oj-input-date label-hint="Retention Release From Date" style="width: 21rem;"
          converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'
          placeholder="Retention Release From Date" value="{{ $variables.newSearchObj.p_from_ret_rel_date }}"
         >
        </oj-input-date>
 <oj-input-date label-hint="Retention Release to Date" style="width: 21rem;"
   converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}' placeholder="Retention Release to Date"
   value="{{ $variables.newSearchObj.p_to_ret_rel_date }}" min="[[ $variables.newSearchObj.p_from_ret_rel_date ]]"
           >
        </oj-input-date>
<!-- <oj-switch label-hint="Active" value="{{ $variables.newSearchObj.p_contract_status == 'Y'?true:false }}"
  on-value-changed="[[$listeners.switchValue]]"
          ></oj-switch> -->
      </oj-form-layout >
  </div>
<div style="display:flex; justify-content:flex-end;">
  <br>
      <oj-button style="searchBtn margin-left:0.5%;margin-right:0.5%;"
        label="[[$application.translations.appBundle.button_label]]" on-oj-action="[[$listeners.buttonAction7]]" >
        <!-- <oj-bind-text value="[[$application.translations.app.search]]"></oj-bind-text> -->
      </oj-button>
      <oj-button style="resetBtn margin-left:0.5%;margin-right:0.5%;"
        label="[[$application.translations.appBundle.button_label_caa9]]" on-oj-action="[[$listeners.buttonAction8]]">
        <!-- <oj-bind-text value="[[$application.translations.app.reset]]"></oj-bind-text> -->
      </oj-button>
    </div> 


    <!-- <oj-form-layout columns="2" direction="column" max-columns="2" class="oj-forme-control oj-sm-align-self-center">
      <oj-form-layout label-edge="start">
        <!--BusinessUnit 
        <oj-select-single item-text="bu_name"
          label-hint="[[$application.translations.appBundle.select_single_label_hint_5f28]]"
          placeholder="[[$application.translations.appBundle.select_single_placeholder]]"
          value="{{ $variables.searchObject.businessUnit }}" data="[[ $variables.getBusinessunitLov ]]">
          <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
              vertical-grid-visible="disabled" selection-mode='{"row": "single"}'
              columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                                {"headerText":"BusinessUnit","field":"bu_name"}
                               
                            ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
              selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}">
            </oj-table>
          </template>
        </oj-select-single>


        <!--Contract Num 
        <oj-bind-if test='true'>
          <oj-select-single item-text="ret_rel_number"
            label-hint="[[$application.translations.appBundle.select_single_label_hint]]" placeholder="Retention Number"
            value="{{ $variables.transSearchObj.retentionNo }}" data="[[$variables.getSearchRetentionnumberListSDP]]"
            on-value-item-changed="[[$listeners.selectValueItem2]]">
            <template slot="collectionTemplate" data-oj-as="collection">
              <oj-input-text class="oj-form-control-full-width" style="width: 15rem;"
                label-hint="[[$application.translations.appBundle.input_text_label_hint_1166]]"
                placeholder="[[$application.translations.appBundle.input_text_placeholder_45ee]]"
                value="{{ $variables.searchRetentionNumber }}"></oj-input-text>
              <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
                vertical-grid-visible="disabled" selection-mode='{"row": "single"}'
                  columns=' [
                                {"headerText":"Rentention Num","field":"ret_rel_number"},
                                {"headerText":"Supplier Name","field":"vendor_name"},
                                {"headerText":"Supplier Site","field":"vendor_site_code"}

                            ]'  on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}">
              </oj-table>
            </template>

          </oj-select-single>
        </oj-bind-if>

        <!--From Date  
        <oj-input-date converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'
          label-hint="[[$application.translations.appBundle.input_date_label_hint]]"
          placeholder="[[$application.translations.appBundle.input_date_placeholder]]"
          value="{{ $variables.searchObject.fromDate }}"></oj-input-date>

      </oj-form-layout>    
       


      <!-- end 

      <oj-form-layout label-edge="start">

        <!--Vendor Name  
        <oj-input-text label-hint="[[$application.translations.appBundle.input_text_label_hint_31f9]]"
          placeholder="[[$application.translations.appBundle.input_text_placeholder]]" disabled="true"
          value="{{ $variables.transSearchObj.supplierName }}">
        </oj-input-text>

        <!--Vendor Site  
        <oj-input-text label-hint="[[$application.translations.appBundle.input_text_label_hint]]"
          placeholder="[[$application.translations.appBundle.input_text_placeholder_9af1]]" disabled="true"
          value="{{ $variables.transSearchObj.supplierSite }}">
        </oj-input-text>

        <oj-input-date label-hint="[[$application.translations.appBundle.input_date_label_hint_2456]]"
          converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'
          placeholder="[[$application.translations.appBundle.input_date_placeholder_a306]]"
          value="{{ $variables.searchObject.toDate }}">
        </oj-input-date>



      </oj-form-layout>
    </oj-form-layout>
     
    <div style="display:flex; justify-content:flex-end;">
      <oj-button style="searchBtn margin-left:0.5%;margin-right:0.5%;"
        label="[[$application.translations.appBundle.button_label]]" on-oj-action="[[$listeners.buttonAction7]]" >
        <!-- <oj-bind-text value="[[$application.translations.app.search]]"></oj-bind-text> 
      </oj-button>
      <oj-button style="resetBtn margin-left:0.5%;margin-right:0.5%;"
        label="[[$application.translations.appBundle.button_label_caa9]]" on-oj-action="[[$listeners.buttonAction8]]">
        <!-- <oj-bind-text value="[[$application.translations.app.reset]]"></oj-bind-text> 
      </oj-button>
    </div> -->
    <!-- </oj-collapsible> -->
    <!-- </div> -->


  </oj-drawer-popup>


 <div id="sampleDemo" style="" class="demo-padding demo-container">

    <div id="componentDemoContent" style="width: 1px; min-width: 100%;">

      <div id="mainContent">
        <div class="oj-flex oj-sm-justify-content-flex-end">
  <!-- <oj-sample-export-data></oj-sample-export-data> -->
  <oj-button label="Create Retention" on-oj-action="[[$listeners.buttonAction]]" chroming="half">
          <img slot="startIcon"  :src="[[ $flow.path + 'resources/images/MicrosoftTeams-image_(1)_1.png' ]]" >
</oj-button>

  <oj-sample-export-data style="margin-left:3px;" class="oj-flex-item oj-sm-flex-initial" max-rows="10000"
    format="plain" chroming="half" 
    file-name="Application Information" ><span><oj-bind-text value="Export"></oj-bind-text></span>
  <img slot="startIcon" width="15" height="15" :src="[[ $flow.path + 'resources/images/excel_img.png' ]]">
</oj-sample-export-data>

  <oj-table style="width:80%" scroll-policy="loadMoreOnScroll" class="oj-sm-width-full oj-bg-body tablerowdata"
    selection-mode.row="single" id="searchSSTable" display="grid" selection-mode.column="single"
    data="[[ $application.variables.searchData ]]" columns="{{ $variables.columnsList }}"
    
     >
   <!-- edit -->
        <template slot="edit">
          <a target="_blank" on-click="[[$listeners.hyperlinkClick]]"  >
            <oj-bind-text value="[[$current.data]]"></oj-bind-text>
          </a>
        </template>
<!-- contractDate -->
        <template slot="contractDate">
          <oj-input-date value="[[$current.data]]" readonly="true" 
            converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'></oj-input-date>
        </template>

        <template slot="approvalstatus"> 
<oj-bind-if test='[[ $current.row.approval_status_code === "Approved" ]]'>
  <span class="oj-badge oj-badge-success oj-badge-sm" style="margin-left: 40px;">Approved</span>
</oj-bind-if>
<oj-bind-if test='[[ $current.row.approval_status_code === "Draft" ]]'>
  <span class="oj-badge oj-badge-sm oj-badge-info" style="margin-left: 40px;" >Draft</span>
</oj-bind-if>
<oj-bind-if test='[[ $current.row.approval_status_code === "Withdraw" ]]'>
  <span class="oj-badge oj-badge-sm oj-badge-info" style="margin-left: 40px;" >Withdraw</span>
</oj-bind-if>
<oj-bind-if test='[[ $current.row.approval_status_code === "Pending" ]]'>
  <span class="oj-badge oj-badge-sm oj-badge-waring" style="margin-left: 40px;" >Pending</span>
</oj-bind-if>
<oj-bind-if test='[[ $current.row.approval_status_code === "Rejected" ]]'>
  <span class="oj-badge oj-badge-sm oj-badge-danger" style="margin-left: 40px;" >Rejected</span>
</oj-bind-if>
        </template>

     <!-- Contract Status Template -->
    <template slot="activeFlagTemplate">
          <oj-bind-if test='[[ $current.data==="N" ]]'>
            <img :src="[[ $application.path + 'resources/images/Cancel.png' ]]"  style="margin-left:40%;" >
          </oj-bind-if>
          <oj-bind-if test='[[ $current.data!=="N" ]]'>
            <img :src="[[ $flow.path + 'resources/images/isActive_Y.png' ]]"  style="margin-left:35%;" >
          </oj-bind-if>
        </template>
        <template slot="ContractAmount">
           <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
           converter='{"options":{"minimumFractionDigits":3},"type":"number"}'>  
                  </oj-input-number>
                  </template>
        <template slot="TaxAmount">
           <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
           converter='{"options":{"minimumFractionDigits":2},"type":"number"}'>  
                  </oj-input-number>
                  </template>
                  <template slot="NetContractAmount">
           <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
           converter='{"options":{"minimumFractionDigits":2},"type":"number"}'>  
                  </oj-input-number>
                  </template>
         
<!-- <template slot="delete">
             <oj-bind-if
              test="[[ $current.row.approval_status_disp == 'Draft' ||$current.row.approval_status_disp ==  'Rejected' ]]"  >
            
          <oj-button style="alt= center;" display="icons" chroming="borderless"
            on-oj-action="[[$listeners.buttonAction9]]"
              >
            <img width="15" height="15" :src="[[ $flow.path + 'resources/images/deleteBtn.png' ]]">
            <oj-bind-text value="[[$current.data]]"></oj-bind-text>
          </oj-button>
             </oj-bind-if> 
            </template> -->

         <template slot="delete">
             <oj-bind-if
              test="[[ $current.row.approval_status_code == 'Draft' ||$current.row.approval_status_code ==  'Rejected' || $current.row.approval_status_code ==  'Withdraw' ]]"  >
            
          <oj-button style="alt= center;" display="icons" chroming="borderless"
            on-oj-action="[[$listeners.buttonAction9]]"
              >
            <img width="15" height="15" :src="[[ $flow.path + 'resources/images/deleteBtn.png' ]]">
            <oj-bind-text value="[[$current.data]]"></oj-bind-text>
          </oj-button>
             </oj-bind-if> 
			 
			              <oj-bind-if
              test="[[ $current.row.approval_status_code == 'Pending' || $current.row.approval_status_code ==  'Submitted' || $current.row.approval_status_code ==  'Approved' ]]"  >
            
          <oj-button style="alt= center;" display="icons" chroming="borderless"
           
              >
            <img width="15" height="15" :src="[[ $flow.path + 'resources/images/disable_delete_1.png' ]]">
            <oj-bind-text value="[[$current.data]]"></oj-bind-text>
          </oj-button>
             </oj-bind-if> 
            </template> 

<oj-paging-control id="paging" class="oj-sm-width-full" style="margin-left:38%;" page-size="10" slot="bottom"
  data="[[ $application.variables.searchData ]]">
</oj-paging-control>
  </oj-table>

    </div></div></div></div>

<oj-dialog style="width: 550px; height: 500px;" dialog-title="Retention" id="Retention" drag-affordance="title-bar"
  resize-behavior="none" class="">
    <div slot="body">  
   <oj-validation-group id="RetentionForm">     
    <oj-form-layout label-edge="start" label-width="33%" class="oj-forme-control" columns="1">
  <!--Contract No  -->

    
           <oj-select-single label-hint="* Contract Number" style="width: 22rem; margin-bottom:6px;"
             item-text="contract_num" value="{{ $variables.contractObj.contractHdrId }}" required="true"
             data="[[$variables.getApplicationByContractListSDP]]"
             on-value-item-changed="[[$listeners.selectValueItem]]" user-assistance-density="compact">
        <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
                  vertical-grid-visible="disabled" selection-mode='{"row": "single"}' 
                  columns-default='{"resizable": "disabled","sortable": "disabled"}' 
                  class="oj-select-results" 
                  columns=' [ {"headerText":"Contract Number","field":"contract_num"},
                            {"headerText":"Supplier Name","field":"vendor_name"},
                            
                            {"headerText":"Business Unit","field":"bu_name"}
                            ]' 
                on-oj-row-action="[[collection.handleRowAction]]"
                data="[[collection.data]]" selected.row="[[collection.selected]]"
                current-row="{{collection.currentRow}}">
            </oj-table>
          </template>
          </oj-select-single>
<!-- 
<oj-input-text label-hint="[[$application.translations.app.PaymentType1]]"
  class="customfield" value="{{ $variables.contractObj.payment_term }}" disabled="true">
  </oj-input-text> -->

  <oj-input-text label-hint="Business Unit"
   value="{{ $variables.contractObj.businessUnit }}" disabled="true">
  </oj-input-text>
  <oj-input-text label-hint="Supplier Name" 
              value="{{ $variables.contractObj.supplierName }}" disabled="true">
            </oj-input-text>
  <oj-input-text label-hint="Supplier Site" 
              value="{{ $variables.contractObj.supplierSite }}" disabled="true">
  </oj-input-text>
    </oj-form-layout> 
     </oj-validation-group>  
    </div>  


 <div slot="footer">  
      <oj-button chroming="solid" label="Save and Create" on-oj-action="[[$listeners.buttonAction3]]"></oj-button> 
      <oj-button chroming="solid" label="Close" on-oj-action="[[$listeners.buttonAction2]]"></oj-button> 
     </div>
     </oj-dialog>

     <oj-dialog style="display:none; width: 400px;height: 200px;" dialog-title="Information" id="Information">
  <div slot="body">
    <h6 style="font-size:smaller; font-weight: bold;">Are you sure want to create Retention Release?</h6>
  <!-- <oj-button label="Are you sure want to save and continue?" chroming="borderless" disabled="true"></oj-button> -->
  </div>
  <div slot="footer">
    <oj-button chroming="solid" on-oj-action="[[$listeners.buttonAction4]]" >Ok</oj-button>
     <oj-button chroming="solid" on-oj-action="[[$listeners.buttonAction5]]" >Cancel</oj-button>
  </div>
</oj-dialog>


 <oj-dialog dialog-title="Delete" id="DeletePopup">
  <div slot="body">
     <h6 style="font-size:medium; font-weight: bold;">Are you sure want to delete?</h6>
    
  </div>
  <div slot="footer">
    <oj-button on-oj-action="[[$listeners.buttonAction11]]" >Yes</oj-button>
     <oj-button on-oj-action="[[$listeners.buttonAction10]]"  >No</oj-button>
  </div>
</oj-dialog>

</oj-sp-smart-search-page>
