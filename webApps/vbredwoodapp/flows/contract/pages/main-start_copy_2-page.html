<oj-sp-smart-search-page page-title="Contract" display-mode="light" primary-action.display="on" 
  primary-action.label="Reset"
  secondary-actions='[{"label":"Search","id":"search","icon":"oj-ux-ico-content-item-search"}]'
  on-sp-secondary-action="[[$listeners.smartSearchPageTemplateSpSecondaryAction]]"
  on-sp-primary-action="[[$listeners.smartSearchPageTemplateSpPrimaryAction]]">

  <!-- <div class="oj-panel oj-panel-shadow-md oj-selected"> -->
  <oj-drawer-popup style="width:35%;" opened="{{ $variables.drawerPopup }}" edge="end" modality="modeless"
    auto-dismiss="none">
    <!-- <oj-collapsible  id="c4">-->
    <oj-toolbar chroming="solid" style="background-color:#013766;">

      <oj-button display="icons" chroming="borderless" on-oj-action="[[$listeners.buttonAction]]">
        <span class="oj-ux-ico-chevron-left" slot="startIcon"></span>
      </oj-button>
      <h1 id="h4" style="font-size: larger; font-weight: bold; margin-left:1%; color:white; ">Search Contract </h1>

    </oj-toolbar>
    <br>
    <div class="oj-helper-justify-content-flex-end">
    <oj-form-layout columns="1" direction="column" max-columns="2" class="oj-forme-control" label-edge="start">
      <!-- <oj-form-layout label-edge="start"> -->
        <!--BusinessUnit -->
        <oj-select-single item-text="bu_name" style="width: 21rem;"
          label-hint="[[$application.translations.appBundle.select_single_label_hint_5f28]]"
          data="[[ $variables.getBusinessUnitListSDP ]]" value="{{ $variables.postContractTestVar.P_BU_ID }}"
          placeholder="[[$application.translations.appBundle.select_single_placeholder]]">
          <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" selection-mode='{"row": "single"}'
              columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results"
              columns=' [
                                {"headerText":"BusinessUnit","field":"bu_name"}
                               
                            ]' on-oj-row-action="[[collection.handleRowAction]]"
              data="[[collection.data]]" selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}"
              display="grid" horizontal-grid-visible="disabled" vertical-grid-visible="disabled">
            </oj-table>
          </template>
        </oj-select-single>


        <!--Contract Num -->
        <oj-bind-if test='true'>
          <oj-select-single item-text="contract_num" style="width: 21rem;"
            label-hint="[[$application.translations.appBundle.ContractNumber]]"
            value="{{ $variables.postContractTestVar.P_CONTRACT_NUM }}"
            data="[[$variables.getContractHeaderLovListSDP2]]" placeholder="Contract Number">
            <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
              vertical-grid-visible="disabled" selection-mode='{"row": "single"}'
              columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                                {"headerText":"Contract Number","field":"contract_num"}
                               
                            ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
              selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid">
            </oj-table>
          </template>
            <!-- <template slot="collectionTemplate" data-oj-as="collection">
              <oj-input-text class="oj-form-control-full-width" style="width: 15rem;"
                label-hint="[[$application.translations.appBundle.input_text_label_hint_1166]]"
                value="{{ $variables.SearchContractNum }}"
                placeholder="[[$application.translations.appBundle.input_text_placeholder_45ee]]"></oj-input-text> -->
              <!-- <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
                vertical-grid-visible="disabled" selection-mode='{"row": "single"}'
                columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                                {"headerText":"Contract Num","field":"contract_num"},
                                {"headerText":"Supplier Name","field":"vendor_name"},
                                {"headerText":"Supplier Site","field":"vendor_site_code"}

                            ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}">
              </oj-table> 
            </template>-->
-->

          </oj-select-single>
        </oj-bind-if>


      <!-- <oj-form-layout label-edge="start"> -->

        <!--Vendor Name  -->
        <oj-select-single label-hint="[[$application.translations.appBundle.input_text_label_hint_31f9]]"
          style="width: 21rem;" value="{{ $variables.postContractTestVar.P_VENDOR_ID }}"
          data="[[$variables.getVendorsListSDP]]" item-text="vendor_name" placeholder="Supplier Name">
          <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
              vertical-grid-visible="disabled" selection-mode='{"row": "single"}'
              columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                                {"headerText":"Vendor Name","field":"vendor_name"}
                               
                            ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
              selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid">
            </oj-table>
          </template></oj-select-single>

          <oj-select-single label-hint="Approval Status" data="[[$variables.getookupdetailListSDP2]]"
            style="width: 21rem;" item-text="lookup_value_name_disp" placeholder="Approval Status"
            value="{{ $variables.postContractTestVar.P_APPROVAL_STATUS_ID }}">
            <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
              vertical-grid-visible="disabled" selection-mode='{"row": "single"}'
              columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                                {"headerText":"Approval Status","field":"lookup_value_name_disp"}
                               
                            ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
              selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}" display="grid">
            </oj-table>
          </template>
            </oj-select-single>

        <!--Vendor Site  -->
        <!-- <oj-input-text label-hint="[[$application.translations.appBundle.input_text_label_hint]]" style="width: 24rem;"
          value="{{ $variables.transSearchObj.supplierSite }}"
          placeholder="[[$application.translations.appBundle.input_text_placeholder_9af1]]" disabled="true">
        </oj-input-text> -->
        

      <oj-input-date converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}' style="width: 21rem;"
          label-hint="[[$application.translations.appBundle.input_date_label_hint]]"
          placeholder="[[$application.translations.appBundle.input_date_placeholder]]"
          value="{{ $variables.postContractTestVar.P_FROM_CONTRACT_DATE }}">
        </oj-input-date>

        <oj-input-date label-hint="[[$application.translations.appBundle.input_date_label_hint_2456]]"
          converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}' style="width: 21rem;"
          placeholder="[[$application.translations.appBundle.input_date_placeholder_a306]]"
          value="{{ $variables.postContractTestVar.P_TO_CONTRACT_DATE }}" min="[[ $variables.searchObj.fromDate ]]">
        </oj-input-date>
<!-- <oj-select-single label-hint="Approval Status" style="width: 24rem;" data="[[$variables.getookupdetailListSDP]]"
  item-text="lookup_value_name_disp" value="{{ $variables.searchObj.approval_Status }}" placeholder="Approval Status" ></oj-select-single> -->
        <oj-switch label-hint="Active" value="{{ $variables.postContractTestVar.P_CONTRACT_STATUS == 'Y'?true:false }}"
          on-value-changed="[[$listeners.switchValue]]"></oj-switch>

<!-- 
      </oj-form-layout> -->
    </oj-form-layout>
    </div>
    <div style="display:flex; justify-content:flex-end;">
      <oj-button style="searchBtn margin-left:0.5%;margin-right:0.5%;"
        label="[[$application.translations.appBundle.button_label]]" on-oj-action="[[$listeners.buttonAction2]]">
        <!-- <oj-bind-text value="[[$application.translations.app.search]]"></oj-bind-text> -->
      </oj-button>
      <oj-button style="resetBtn margin-left:0.5%;margin-right:0.5%;"
        label="[[$application.translations.appBundle.button_label_caa9]]" on-oj-action="[[$listeners.buttonAction3]]">
        <!-- <oj-bind-text value="[[$application.translations.app.reset]]"></oj-bind-text> -->
      </oj-button>
    </div>
    <!-- </oj-collapsible> -->
    <!-- </div> -->


  </oj-drawer-popup>

   <div id="sampleDemo" style="" class="demo-padding demo-container">

    <div id="componentDemoContent" style="width: 1px; min-width: 100%;">

      <div id="mainContent">
        
   <!-- <oj-sample-export-data max-rows="1000000" include-header-row="true" display="all" chroming="half" format="plain"
     file-name="Contract Information"
     columns='[ { "field": "contract_num","headerText": "Contract Num"},      { "field": "contract_name","headerText": "Scope Of Work"},         { "field": "object_version_num","headerText": "Version"},     { "field": "contract_date", "headerText": "Contract Date"},     { "field": "vendor_name","headerText": "Supplier Name"},      { "field": "vendor_site_code", "headerText": "Supplier Site"},        { "field": "currency_code", "headerText": "Currency" },     { "field": "contract_amount", "headerText": "Contract Amount"},     {  "field": "tax_amount","headerText": "Tax Amount" },     {  "field": "net_contract_amount", "headerText": "Total Contract Amount"},     {  "field": "bu_name","headerText": "Business Unit"}]'
     data="[[ $variables.getSearchContractHeaderADP ]]" >
    
   </oj-sample-export-data>  -->

   <div class="oj-flex oj-sm-justify-content-flex-end">
        <oj-sample-export-data max-rows="10000" file-name="contract Information" format="plain"
          data="[[ $variables.getSearchContractHeaderADP ]]" chroming="half"
          columns='[    {        "headerText": "Contract Number",        "field": "contract_num",        "width": 182,        "template": "edit",        "resizable": "enabled",        "frozenEdge": "start"    },    {        "headerText": "Version",        "field": "object_version_num",        "template": "version",        "width": 130,        "resizable": "enabled",        "frozenEdge": "start"    },    {        "headerText": "Scope of Work",        "field": "contract_name",        "template": "scopeofWork",        "width": 161,        "resizable": "enabled",        "frozenEdge": "start"    },    {        "headerText": "Contract Date",        "field": "contract_date",        "template": "contractDate",        "width": 154,        "resizable": "enabled",        "frozenEdge": "start"    },    {        "headerText": "Approval Status",        "field": "approval_status_disp",        "template": "",        "width": 194,        "resizable": "enabled"    },    {        "headerText": "Contract Status",        "field": "contract_status",        "template": "activeFlagTemplate",        "width": 166,        "resizable": "enabled"    },    {        "headerText": "Supplier Name",        "field": "vendor_name",        "template": "",        "width": 175,        "resizable": "enabled"    },    {        "headerText": "Supplier Site",        "field": "vendor_site_code",        "template": "",        "width": 146,        "resizable": "enabled"    },    {        "headerText": "Currency",        "field": "currency_code",        "template": "",        "width": 110,        "resizable": "enabled"    },    {        "headerText": "Contract Amount",        "field": "contract_amount",        "template": "ContractAmount",        "width": 180,        "resizable": "enabled"    },    {        "headerText": "Tax Amount",        "field": "tax_amount",        "template": "TaxAmount",        "width": 148,        "resizable": "enabled"    },    {        "headerText": "Total Contract Amount",        "field": "net_contract_amount",        "template": "NetContractAmount",        "width": 223,        "resizable": "enabled"    },    {        "headerText": "Business Unit",        "field": "bu_name",        "template": "",        "width": 175,        "resizable": "enabled"    },    {        "headerText": "Previous",        "field": "",        "template": "previous",        "width": 110,        "resizable": "enabled"    }]'><span><oj-bind-text value="Export"></oj-bind-text></span>
          <img slot="startIcon" :src="[[ $flow.path + 'resources/images/excel_img_1.png' ]]" width="15" height="15">
</oj-sample-export-data>
       
       
        <oj-table scroll-policy="loadMoreOnScroll" class="oj-sm-width-full oj-bg-body oj-search-table"
            selection-mode.row="single" id="searchSSTable" display="grid" selection-mode.column="single"
            data="[[ $variables.pagingSearch ]]"
            columns="{{ $variables.contractColumnList }}">
            <!-- edit -->
            <template slot="edit">
              <a target="_blank" on-click="[[$listeners.hyperlinkClick]]">
                <oj-bind-text value="[[$current.data]]"></oj-bind-text>
              </a>
            </template>
            <!-- contractDate -->
            <template slot="contractDate">
              <oj-input-date value="[[$current.data]]" readonly="true"
                converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'></oj-input-date>
            </template>

            <!-- Contract Status Template -->
            <template slot="activeFlagTemplate">
              <oj-bind-if test='[[ $current.data==="N" ]]'>
                <img :src="[[ $application.path + 'resources/images/Cancel.png' ]]"  style="margin-left:40%;" >
              </oj-bind-if>
              <oj-bind-if test='[[ $current.data!=="N" ]]'>
                <img :src="[[ $flow.path + 'resources/images/Ok_tick_icon.png' ]]"  style="margin-left:35%;" >
              </oj-bind-if>
            </template>
            

            <template slot="ContractAmount">
              <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                id="21" converter='{"options":{"minimumFractionDigits":2,"maximumFractionDigits":2},"type":"number"}'> 
                        </oj-input-number>
              <!-- <oj-sp-input-currency style="text-align: right;" value="[[$current.data]]" readonly="true"
                currency="[[ $current.row.currency_code ]]" currency-format="standard" disabled="true" label-hint=" "
                currency-display="symbol"></oj-sp-input-currency> -->                    
 </template>
			
			
			
			
<template slot="TaxAmount">
              <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
               id="22"  converter='{"options":{"minimumFractionDigits":2,"maximumFractionDigits":2},"type":"number"}'> 
                        </oj-input-number>
                     
 </template> 
			
			
			
			
			
 <template slot="NetContractAmount">
              <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                id="23"  converter='{"options":{"minimumFractionDigits":2,"maximumFractionDigits":2},"type":"number"}'> 
                        </oj-input-number>
                     
 </template>
            

             <!-- <template slot="previous">
         <oj-button  display="icons" style="margin-left:40%;"
           chroming="borderless" on-oj-action="[[$listeners.buttonAction4]]" >
            <img slot="startIcon" :src="[[ $flow.path + 'resources/images/MicrosoftTeams-image_(7)_1.png' ]]">
         </oj-button>
                  </template> -->
            <!-- <template slot="revision">
          <oj-button label="[[$application.translations.app.Revision]]" on-oj-action="[[$listeners.buttonAction4]]"></oj-button>
                  </template>
            <template slot="previous">
         <oj-button label="[[$application.translations.app.Previous]]" display="icons" style="margin-left:40%;"
           chroming="borderless" >
            <img slot="startIcon" :src="[[ $flow.path + 'resources/images/MicrosoftTeams-image_(7).png' ]]">
         </oj-button>
                  </template> -->



            <oj-paging-control style="margin-left:38%;" id="paging" class="oj-sm-width-full" page-size="15"
              slot="bottom" data="[[ $variables.pagingSearch ]]">
            </oj-paging-control>
          </oj-table>
        
  

          
        </div>
      </div>
    </div>
  </div>

 
 

</oj-sp-smart-search-page>
