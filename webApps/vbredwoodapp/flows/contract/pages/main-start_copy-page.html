<oj-sp-smart-search-page page-title="Previous Contract" display-mode="light" primary-action.display="on"
  primary-action.label="Reset"
  secondary-actions='[{"label":"Search","id":"search","icon":"oj-ux-ico-content-item-search"}]'
  on-sp-secondary-action="[[$listeners.smartSearchPageTemplateSpSecondaryAction]]"
  on-sp-primary-action="[[$listeners.smartSearchPageTemplateSpPrimaryAction]]" display-options.in-flow-back="true"
  on-sp-in-flow-back="[[$listeners.smartSearchPageTemplateSpInFlowBack]]">

  <!-- <div class="oj-panel oj-panel-shadow-md oj-selected"> -->
  <oj-drawer-popup style="width:60%;" opened="{{ $variables.drawerPopup }}" edge="end" modality="modeless"
    auto-dismiss="none">
    <!-- <oj-collapsible  id="c4">-->
    <oj-toolbar chroming="solid" style="background-color:#013766;">

      <oj-button display="icons" chroming="borderless" on-oj-action="[[$listeners.buttonAction]]">
        <span class="oj-ux-ico-chevron-left" slot="startIcon"></span>
      </oj-button>
      <h1 id="h4" style="font-size: larger; font-weight: bold; margin-left:1%; color:white; ">Search Previous Contract</h1>

    </oj-toolbar>
    <br>
    <oj-form-layout columns="2" direction="column" max-columns="2" class="oj-sm-align-self-center oj-forme-control">
      <oj-form-layout label-edge="start">
        <!--BusinessUnit -->
        <oj-select-single item-text="bu_name"
          label-hint="[[$application.translations.appBundle.select_single_label_hint_5f28]]"
          data="[[ $variables.getBusinessUnitListSDP ]]" value="{{ $variables.searchObj.buId }}"
          placeholder="[[$application.translations.appBundle.select_single_placeholder]]"
          on-value-item-changed="[[$listeners.selectValueItem2]]">
          <template slot="collectionTemplate" data-oj-as="collection">
            <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
              vertical-grid-visible="disabled" selection-mode='{"row": "single"}'
              columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                                {"headerText":"BusinessUnit","field":"bu_name"}
                               
                            ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
              selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}">
            </oj-table>
          </template>
        </oj-select-single>


        <!--Contract Num -->
        <oj-bind-if test='true'>
          <oj-select-single item-text="contract_num"
            label-hint="[[$application.translations.appBundle.ContractNumber]]"
            value="{{ $variables.transSearchObj.contractNo }}"
            placeholder="[[$application.translations.appBundle.ContractNumber]]"
            data="[[ $variables.getContractNumberSDP ]]" on-value-item-changed="[[$listeners.selectValueItem]]">
            <template slot="collectionTemplate" data-oj-as="collection">
              <oj-input-text class="oj-form-control-full-width" style="width: 15rem;"
                label-hint="[[$application.translations.appBundle.input_text_label_hint_1166]]"
                value="{{ $variables.SearchContractNum }}"
                placeholder="[[$application.translations.appBundle.input_text_placeholder_45ee]]"></oj-input-text>
              <oj-table scroll-policy="loadMoreOnScroll" horizontal-grid-visible="disabled"
                vertical-grid-visible="disabled" selection-mode='{"row": "single"}'
                columns-default='{"resizable": "disabled","sortable": "disabled"}' class="oj-select-results" columns=' [
                                {"headerText":"Contract Num","field":"contract_num"},
                                {"headerText":"Supplier Name","field":"vendor_name"},
                                {"headerText":"Supplier Site","field":"vendor_site_code"}

                            ]' on-oj-row-action="[[collection.handleRowAction]]" data="[[collection.data]]"
                selected.row="[[collection.selected]]" current-row="{{collection.currentRow}}">
              </oj-table>
            </template>

          </oj-select-single>
        </oj-bind-if>

        <!--From Date  -->
        <oj-input-date converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'
          label-hint="[[$application.translations.appBundle.input_date_label_hint]]"
          placeholder="[[$application.translations.appBundle.input_date_placeholder]]"
          value="{{ $variables.searchObj.fromDate }}"></oj-input-date>

      </oj-form-layout>    
       


      <!-- end -->

      <oj-form-layout label-edge="start">

        <!--Vendor Name  -->
        <oj-input-text label-hint="[[$application.translations.appBundle.input_text_label_hint_31f9]]"
          placeholder="[[$application.translations.appBundle.input_text_placeholder]]"
          value="{{ $variables.transSearchObj.supplierName }}" disabled="true">
        </oj-input-text>

        <!--Vendor Site  -->
        <oj-input-text label-hint="[[$application.translations.appBundle.input_text_label_hint]]"
          value="{{ $variables.transSearchObj.supplierSite }}"
          placeholder="[[$application.translations.appBundle.input_text_placeholder_9af1]]" disabled="true">
        </oj-input-text>

        <oj-input-date label-hint="[[$application.translations.appBundle.input_date_label_hint_2456]]"
          converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'
          placeholder="[[$application.translations.appBundle.input_date_placeholder_a306]]"
          value="{{ $variables.searchObj.toDate }}">
        </oj-input-date>
        <oj-switch label-hint="Active" value="{{ $variables.searchObj.activeFlag == 'Y'?true:false }}"
          on-value-changed="[[$listeners.switchValue]]"></oj-switch>


      </oj-form-layout>
    </oj-form-layout>
     
    <div style="display:flex; justify-content:flex-end;">
      <oj-button style="searchBtn margin-left:0.5%;margin-right:0.5%;"
        label="[[$application.translations.appBundle.button_label]]" on-oj-action="[[$listeners.buttonAction2]]">
        <!-- <oj-bind-text value="[[$application.translations.app.search]]"></oj-bind-text> -->
      </oj-button>
      <oj-button style="resetBtn margin-left:0.5%;margin-right:0.5%;"
        label="[[$application.translations.appBundle.button_label_caa9]]" on-oj-action="[[$listeners.buttonAction3]]">
        <!-- <oj-bind-text value="[[$application.translations.app.reset]]"></oj-bind-text> -->
      </oj-button>
    </div>
    <!-- </oj-collapsible> -->
    <!-- </div> -->


  </oj-drawer-popup>

   <div id="sampleDemo" style="" class="demo-padding demo-container">

    <div id="componentDemoContent" style="width: 1px; min-width: 100%;">

      <div id="mainContent">
        <div class="oj-flex">

          <oj-table scroll-policy="loadMoreOnScroll" class="oj-sm-width-full oj-bg-body oj-search-table"
            selection-mode.row="single" id="searchSSTable" display="grid" selection-mode.column="single"
           
           
            data="[[ $variables.pagingSearch ]]" columns="{{ $variables.contractColumnList }}">
            <!-- edit -->
            <template slot="edit">
              <a target="_blank" on-click="[[$listeners.hyperlinkClick]]">
                <oj-bind-text value="[[$current.data]]"></oj-bind-text>
              </a>
            </template>
            <!-- contractDate -->
            <template slot="contractDate">
              <oj-input-date value="[[$current.data]]" readonly="true"
                converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'></oj-input-date>
            </template>

            <!-- Contract Status Template -->
            <template slot="activeFlagTemplate">
              <oj-bind-if test='[[ $current.data==="N" ]]'>
                <img :src="[[ $application.path + 'resources/images/Cancel.png' ]]"  style="margin-left:40%;" >
              </oj-bind-if>
              <oj-bind-if test='[[ $current.data!=="N" ]]'>
                <img :src="[[ $flow.path + 'resources/images/Ok_tick_icon.png' ]]"  style="margin-left:35%;" >
              </oj-bind-if>
            </template>
            <template slot="ContractAmount">
              <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                converter='{"options":{"minimumFractionDigits":2},"type":"number"}'> 
                        </oj-input-number>
                     
            </template>
            <template slot="TaxAmount">
              <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                converter='{"options":{"minimumFractionDigits":2},"type":"number"}'> 
                        </oj-input-number>
                     
            </template>
            <template slot="NetContractAmount">
              <oj-input-number style="text-align: right;" value="[[$current.data]]" readonly="true"
                converter='{"options":{"minimumFractionDigits":2},"type":"number"}'> 
                        </oj-input-number>
                     
            </template>

             <template slot="previous">
         <oj-button  display="icons" style="margin-left:40%;"
           chroming="borderless" on-oj-action="[[$listeners.buttonAction4]]" >
            <img slot="startIcon" :src="[[ $flow.path + 'resources/images/MicrosoftTeams-image_(7)_1.png' ]]">
         </oj-button>
                  </template>
            <!-- <template slot="revision">
          <oj-button label="[[$application.translations.app.Revision]]" on-oj-action="[[$listeners.buttonAction4]]"></oj-button>
                  </template>
            <template slot="previous">
         <oj-button label="[[$application.translations.app.Previous]]" display="icons" style="margin-left:40%;"
           chroming="borderless" >
            <img slot="startIcon" :src="[[ $flow.path + 'resources/images/MicrosoftTeams-image_(7).png' ]]">
         </oj-button>
                  </template> -->


            <oj-paging-control id="paging" class="oj-sm-width-full" page-size="50" slot="bottom"
              data="[[ $variables.pagingSearch ]]">
            </oj-paging-control>
          </oj-table>
        </div>
      </div>
    </div>
  </div>


</oj-sp-smart-search-page>